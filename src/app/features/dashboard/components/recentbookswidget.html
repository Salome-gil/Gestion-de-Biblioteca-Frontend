<div class="card recent-books-widget">

  <div class="flex justify-between items-center mb-4">
    <div class="text-xl md:text-2xl font-semibold text-surface-900 dark:text-surface-0 flex items-center gap-2">
      <i class="pi pi-bookmark text-primary text-2xl"></i>
      Libros de la Semana
    </div>
    <i class="pi pi-calendar text-primary text-2xl"></i>
  </div>

  <p-table
    [value]="librosSemana"
    [paginator]="true"
    [rows]="5"
    responsiveLayout="scroll"
    class="custom-table"
  >
    <ng-template pTemplate="header">
      <tr>
        <th class="w-16 text-center">Portada</th>
        <th>Título</th>
        <th>Autor</th>
        <th class="text-center">Estado</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-libro>
      <tr>
        <td class="text-center">

          <img
            [src]="libro.portada ? libro.portada : 'assets/imagenes/book-placeholder.png'"
            [alt]="libro.titulo"
            class="portada w-12 h-16 object-cover rounded shadow-sm"
            (error)="onImageError($event)"
          />
        </td>
        <td>{{ libro.titulo }}</td>
        <td>{{ libro.autor }}</td>
        <td class="text-center">
          <span
            class="estado px-2 py-1 rounded text-sm font-medium"
            [ngClass]="{
              'bg-green-100 text-green-800': libro.estado?.toLowerCase() === 'disponible',
              'bg-red-100 text-red-800': libro.estado?.toLowerCase() === 'prestado'
            }"
          >
            {{ libro.estado || 'Desconocido' }}
          </span>
        </td>
      </tr>
    </ng-template>
  </p-table>

  <p class="mt-4 text-center text-sm text-muted-color">
    Últimos materiales agregados a la biblioteca
  </p>
</div>
